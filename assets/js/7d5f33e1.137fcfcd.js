"use strict";(self.webpackChunkdannyjiajia_github_io=self.webpackChunkdannyjiajia_github_io||[]).push([[7587],{2736:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var r=t(2949),l=t(4848),s=t(8453);const a={title:"\u4ecb\u7ecd\u4e0bStorIOSQLite\u5230RxJava",date:new Date("2017-03-31T09:46:40.000Z"),tags:["Android","RxJava"]},o=void 0,i={authorsImageUrls:[]},c=[{value:"storio\u7b80\u4ecb",id:"storio\u7b80\u4ecb",level:2},{value:"Resolver\u64cd\u4f5c\u5b9e\u4f53\u7c7b",id:"resolver\u64cd\u4f5c\u5b9e\u4f53\u7c7b",level:2},{value:"Entity VS Cursor",id:"entity-vs-cursor",level:2},{value:"RxJava VS executeAsBlocking",id:"rxjava-vs-executeasblocking",level:2},{value:"\u7406\u89e3RxBus",id:"\u7406\u89e3rxbus",level:3},{value:"<code>StorIOSQLite</code>\u505a\u4e86\u4ec0\u4e48?",id:"storiosqlite\u505a\u4e86\u4ec0\u4e48",level:3},{value:"\u591a\u5f20\u8868\u7684\u76d1\u542c",id:"\u591a\u5f20\u8868\u7684\u76d1\u542c",level:3},{value:"\u4e3b\u52a8\u901a\u77e5\u53d8\u5316",id:"\u4e3b\u52a8\u901a\u77e5\u53d8\u5316",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"storio\u7b80\u4ecb",children:"storio\u7b80\u4ecb"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"storio"}),"\u662fgithub\u4e0a\u7684",(0,l.jsx)(n.a,{href:"https://github.com/pushtorefresh/storio",children:"\u5f00\u6e90\u9879\u76ee"}),",\u5b83\u7528\u6765\u64cd\u4f5c",(0,l.jsx)(n.code,{children:"SQLiteDatabase"}),"\u548c ",(0,l.jsx)(n.code,{children:"ContentResolver"}),"\u7684\u64cd\u4f5c\u8fdb\u884c\u5c01\u88c5,\u63d0\u4f9b\u66f4\u7b80\u5355\u66f4\u5f3a\u5927\u7684api.\u6211\u4eec\u9879\u76ee\u6700\u8fd1\u4ece",(0,l.jsx)(n.code,{children:"xutils3"}),"\u8f6c\u6362\u4e3a",(0,l.jsx)(n.code,{children:"StorIOSQLite"}),",\u8bf4\u8bf4\u5bf9\u5b83\u7684\u4f53\u9a8c\u548c\u5b83\u662f\u5982\u4f55\u4f7f\u7528",(0,l.jsx)(n.code,{children:"RxJava"}),"\u8fdb\u884c\u5c01\u88c5."]}),"\n",(0,l.jsx)(n.h2,{id:"resolver\u64cd\u4f5c\u5b9e\u4f53\u7c7b",children:"Resolver\u64cd\u4f5c\u5b9e\u4f53\u7c7b"}),"\n",(0,l.jsxs)(n.p,{children:["\u901a\u8fc7",(0,l.jsx)(n.code,{children:"SQLiteTypeMapping"}),"\u63d0\u4f9b\u5b9e\u4f53\u7684\u4e09\u79cd",(0,l.jsx)(n.code,{children:"Resolver"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"PutResolver"}),"\n",(0,l.jsx)(n.li,{children:"GetResolver"}),"\n",(0,l.jsx)(n.li,{children:"DeleteResolver"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e5f\u5c31\u662f\u5206\u522b\u5bf9\u5e94\u6211\u4eec\u5728\u8fdb\u884cAPI\u64cd\u4f5c\u65f6"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5c06\u5b9e\u4f53\u8f6c\u6362\u4e3a\u6570\u636e\u5e93\u6570\u636e(InsertQuery,UpdateQuery...)"}),"\n",(0,l.jsx)(n.li,{children:"\u5c06\u6570\u636e\u5e93\u6570\u636e(Cursor)\u88c5\u6362\u6210\u5b9e\u4f53\u5bf9\u8c61"}),"\n",(0,l.jsx)(n.li,{children:"\u5982\u4f55\u6267\u884c\u5220\u9664\u64cd\u4f5c"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5e38\u89c4\u7684",(0,l.jsx)(n.code,{children:"Resolver"}),"\u53ea\u8981\u6211\u5728\u5b9e\u4f53\u7c7b\u4e2d\u4f7f\u7528\u5b83\u7684",(0,l.jsx)(n.code,{children:"Annotation Processor"}),"\u4fbf\u4f1a\u81ea\u52a8\u751f\u6210\u3002"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u81ea\u5b9a\u4e49\u5462?"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u590d\u6742\u5b9e\u4f53\u5bf9\u8c61\u7684\u65f6\u5019(\u8fde\u8868\u67e5\u8be2),\u56e0\u4e3a",(0,l.jsx)(n.code,{children:" storio"}),"\u662f\u4e0d\u5173\u5fc3\u5177\u4f53\u5b9e\u4f53\u7c7b\u7684,\u5b83\u53ea\u5173\u5fc3\u5982\u4f55\u5c06\u5b9e\u4f53\u548c\u6570\u636e\u5e93\u64cd\u4f5c\u5efa\u7acb\u8d77\u5173\u7cfb\n\u6bd4\u5982\u6587\u6863\u4e2d\u7684",(0,l.jsx)(n.a,{href:"https://github.com/pushtorefresh/storio/blob/master/storio-sample-app/src/main/java/com/pushtorefresh/storio/sample/db/resolvers/UserWithTweetsGetResolver.java",children:"UserWithTweetsGetResolver.java"})]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u501f\u9274xutils\u5229\u7528",(0,l.jsx)(n.code,{children:"HashMap"}),"\u6765\u5b9a\u4e49\u901a\u7528\u7684\u8bfb\u53d6\u5b9e\u4f53"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'import android.text.TextUtils;\n\nimport java.util.Date;\nimport java.util.HashMap;\n\npublic final class DbModel {\n\n    /**\n     * key: columnName\n     * value: valueStr\n     */\n    private HashMap<String, String> dataMap = new HashMap<String, String>();\n\n    public String getString(String columnName) {\n        return dataMap.get(columnName);\n    }\n\n    public int getInt(String columnName) {\n        return Integer.valueOf(dataMap.get(columnName));\n    }\n\n    public boolean getBoolean(String columnName) {\n        String value = dataMap.get(columnName);\n        if (value != null) {\n            return value.length() == 1 ? "1".equals(value) : Boolean.valueOf(value);\n        }\n        return false;\n    }\n\n    public double getDouble(String columnName) {\n        return Double.valueOf(dataMap.get(columnName));\n    }\n\n    public float getFloat(String columnName) {\n        return Float.valueOf(dataMap.get(columnName));\n    }\n\n    public long getLong(String columnName) {\n        return Long.valueOf(dataMap.get(columnName));\n    }\n\n    public Date getDate(String columnName) {\n        long date = Long.valueOf(dataMap.get(columnName));\n        return new Date(date);\n    }\n\n    public java.sql.Date getSqlDate(String columnName) {\n        long date = Long.valueOf(dataMap.get(columnName));\n        return new java.sql.Date(date);\n    }\n\n    public void add(String columnName, String valueStr) {\n        dataMap.put(columnName, valueStr);\n    }\n\n    /**\n     * @return key: columnName\n     */\n    public HashMap<String, String> getDataMap() {\n        return dataMap;\n    }\n\n    /**\n     * @param columnName\n     * @return\n     */\n    public boolean isEmpty(String columnName) {\n        return TextUtils.isEmpty(dataMap.get(columnName));\n    }\n}\n'})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u63d0\u4f9bSQLiteTypeMapping,\u53ea\u63d0\u4f9bget\u64cd\u4f5c"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'import android.database.Cursor;\nimport android.support.annotation.NonNull;\n\nimport com.pushtorefresh.storio.sqlite.SQLiteTypeMapping;\nimport com.pushtorefresh.storio.sqlite.StorIOSQLite;\nimport com.pushtorefresh.storio.sqlite.operations.delete.DeleteResolver;\nimport com.pushtorefresh.storio.sqlite.operations.delete.DeleteResult;\nimport com.pushtorefresh.storio.sqlite.operations.get.DefaultGetResolver;\nimport com.pushtorefresh.storio.sqlite.operations.put.PutResolver;\nimport com.pushtorefresh.storio.sqlite.operations.put.PutResult;\n\n/**\n * Created by dannyhe on 14/01/2017.\n */\n\npublic class DbModelSQLiteTypeMapping extends SQLiteTypeMapping<DbModel> {\n\n\tpublic static class DBModelPutResolver extends PutResolver<DbModel> {\n\n\t\t@NonNull\n\t\t@Override\n\t\tpublic PutResult performPut(@NonNull StorIOSQLite storIOSQLite, @NonNull DbModel object) {\n\t\t\treturn PutResult.newUpdateResult(0,"");\n\t\t}\n\t}\n\n\tpublic static class DBModelGetResolver extends DefaultGetResolver<DbModel> {\n\n\t\t@NonNull\n\t\t@Override\n\t\tpublic DbModel mapFromCursor(@NonNull Cursor cursor) {\n\t\t\tDbModel result = new DbModel();\n\t\t\tint columnCount = cursor.getColumnCount();\n\t\t\tfor (int i = 0; i < columnCount; i++) {\n\t\t\t\tresult.add(cursor.getColumnName(i), cursor.getString(i));\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tpublic static class DBModelDeleteResolver extends DeleteResolver<DbModel> {\n\t\t@NonNull\n\t\t@Override\n\t\tpublic DeleteResult performDelete(@NonNull StorIOSQLite storIOSQLite, @NonNull DbModel object) {\n\t\t\treturn DeleteResult.newInstance(0,"");\n\t\t}\n\t}\n\n\n\tpublic DbModelSQLiteTypeMapping() {\n\t\tsuper(new DBModelPutResolver(),\n\t\t\t\tnew DBModelGetResolver(),\n\t\t\t\tnew DBModelDeleteResolver());\n\t}\n\n}\n'})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u5982\u4f55\u4f7f\u7528"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'StorIOSQLite mStorIOSQLite =  DefaultStorIOSQLite.builder()\n    .sqliteOpenHelper(dbOpenHelper)\n    .defaultScheduler(defaultStorIOSQLiteScheduler()) //io thread\n    .addTypeMapping(DbModel.class, new DbModelSQLiteTypeMapping())\n    .build;\n\nDbModel dbModel = mStorIOSQLite.get()\n                .object(DbModel.class)\n                .withQuery(RawQuery.builder()\n                        .query("SELECT COUNT(*) AS c FROM sqlite_master WHERE type=? AND name=?")\n                        .args("table", tableName)\n                        .build())\n                .prepare()\n                .executeAsBlocking();\n'})}),"\n",(0,l.jsx)(n.h2,{id:"entity-vs-cursor",children:"Entity VS Cursor"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"storio"}),"\u63d0\u4f9b\u4e86\u4e24\u79cd\u8bfb\u53d6\u65b9\u5f0f:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Entity"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'DbModel dbModel = mStorIOSQLite.get()\n                .object(DbModel.class)\n                .withQuery(RawQuery.builder()\n                        .query("SELECT COUNT(*) AS c FROM sqlite_master WHERE type=? AND name=?")\n                        .args("table", tableName)\n                        .build())\n                .prepare()\n                .executeAsBlocking();\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"Cursor"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'final Cursor dbModelCursor = mStorIOSQLite.get()\n                .cursor()\n                .withQuery(RawQuery.builder()\n                        .query("SELECT COUNT(*) AS c FROM sqlite_master WHERE type=? AND name=?")\n                        .args("table", tableName)\n                        .build())\n                .prepare()\n                .executeAsBlocking();\n...\n'})}),"\n",(0,l.jsx)(n.h2,{id:"rxjava-vs-executeasblocking",children:"RxJava VS executeAsBlocking"}),"\n",(0,l.jsx)(n.h3,{id:"\u7406\u89e3rxbus",children:"\u7406\u89e3RxBus"}),"\n",(0,l.jsxs)(n.p,{children:["\u5173\u4e8e",(0,l.jsx)(n.code,{children:"RxJava"}),"\u7684\u5e94\u7528(",(0,l.jsx)(n.code,{children:"asRxObservable()"}),"),\u76ee\u524d\u6570\u636e\u5e93\u6846\u67b6\u57fa\u672c\u4e0a\u90fd\u662f\u5229\u7528",(0,l.jsx)(n.code,{children:"PublishSubject"}),".\u6bcf\u4e2a",(0,l.jsx)(n.code,{children:"StorIOSQLite"}),"\u5185\u90e8\u6709\u4e2a",(0,l.jsx)(n.code,{children:"RxChangesBus"}),",\u6240\u6709\u7684",(0,l.jsx)(n.code,{children:"asRxObservable()"}),"\u65b9\u6cd5\u90fd\u662f\u8ba2\u9605\u8fd9\u4e2abus.\n\u8ba2\u9605\u65f6\u4f1a\u5bf9Bus\u7684\u4e8b\u4ef6\u8fc7\u6ee4,\u53ea\u7559\u4e0b\u8fd9\u6b21\u67e5\u8be2\u9700\u8981\u7684\u53d8\u5316(\u901a\u8fc7\u6570\u636e\u8868\u7684\u540d\u79f0\u8fc7\u6ee4)\u751f\u6210Observable.\u5e76\u901a\u8fc7",(0,l.jsx)(n.code,{children:"startWith"}),"\u63d2\u5165\u4e00\u6b21\u67e5\u8be2\u7684\u7ed3\u679c,\u7528\u6765\u89e3\u51b3\u8ba2\u9605\u65f6\u6ca1\u6709\u4e8b\u4ef6\u6e90\u89e6\u53d1\u67e5\u8be2\u64cd\u4f5c\u7684\u95ee\u9898."]}),"\n",(0,l.jsxs)(n.p,{children:["\u6211\u4eec\u6765\u5206\u6790\u4e0b\u9762\u7684\u67e5\u8be2",(0,l.jsx)(n.code,{children:"StorIOSQLite"}),"\u5230\u5e95\u505a\u4e86\u4ec0\u4e48,\u4e0b\u9762\u7684\u67e5\u8be2\u6765\u81ea\u5b98\u7f51\u7684\u6587\u6863:\n\u6211\u4eec\u5148\u6309\u7740\u94fe\u5f0f\u9605\u8bfb\u6765\u7406\u89e3\u8fd9\u4e2a\u65b9\u6cd5"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"mStorIOSQLite\n  .get()\n  .listOfObjects(Tweet.class)\n  .withQuery(Query.builder()\n    .table(\"tweets\")\n    .build())\n  .prepare()\n  .asRxObservable() // Get Result as rx.Observable and subscribe to further updates of tables from Query!\n  .observeOn(mainThread()) // All Rx operations work on Schedulers.io()\n  .subscribe(tweets -> { // Please don't forget to unsubscribe\n      // will be called with first result and then after each change of tables from Query\n      // several changes in transaction -> one notification\n      adapter.setData(tweets);\n    }\n  );\n// don't forget to manage Subscription and unsubscribe in lifecycle methods to prevent memory leaks\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:'\u6211\u4eec\u62ff\u5230\u6570\u636e\u5e93(storIOSQLite)\u8bfb\u53d6(get)\u5b58\u6709Tweet\u7684\u5217\u8868(listOfObjects(Tweet.class))\u901a\u8fc7\u67e5\u8be2(Query)\u6570\u636e\u5e93\u8868"tweets".\u6211\u4eec\u9700\u8981\u5f97\u5230Observable(asRxObservable())\u7136\u540e\u5728\u4e3b\u7ebf\u7a0b\u8ba2\u9605(observeOn(mainThread())),\u6700\u540e\u5c06\u6570\u636e\u7ed9adapter.\u5e76\u4e14\u540e\u9762\u6bcf\u6b21tweets\u8868\u53d1\u751f\u53d8\u5316\u90fd\u4f1a\u89e6\u53d1\u8fd9\u6b21\u5237\u65b0(\u9664\u975e\u53d6\u6d88\u8ba2\u9605,\u5f53\u7136\u4e3a\u4e86\u4e0d\u5f15\u53d1\u5185\u5b58\u6cc4\u9732,\u6211\u4eec\u9700\u8981\u5728\u5408\u7406\u7684\u65f6\u5019\u53d6\u6d88\u8ba2\u9605).'}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"storiosqlite\u505a\u4e86\u4ec0\u4e48",children:[(0,l.jsx)(n.code,{children:"StorIOSQLite"}),"\u505a\u4e86\u4ec0\u4e48?"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u9996\u5148\u901a\u8fc7",(0,l.jsx)(n.code,{children:"Query"}),"\u6765\u83b7\u53d6\u9700\u8981\u67e5\u8be2\u7684\u8868,\u6211\u4eec\u8fd9\u91cc\u662f",(0,l.jsx)(n.code,{children:"tweets"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u901a\u8fc7\u5185\u90e8\u7684",(0,l.jsx)(n.code,{children:"RxChangesBus"}),"\u8ba2\u9605\u53d8\u5316(",(0,l.jsx)(n.code,{children:"Changes"}),"),\u5e76\u901a\u8fc7",(0,l.jsx)(n.code,{children:"filter"}),"\u64cd\u4f5c\u7b26\u8fc7\u6ee4\u51fa\u5b58\u5728",(0,l.jsx)(n.code,{children:"tweets"}),"\u8868\u7684\u53d8\u5316"]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u8be2\u4e00\u6b21",(0,l.jsx)(n.code,{children:"Query"}),"\u5e76\u901a\u8fc7",(0,l.jsx)(n.code,{children:"startWith"}),"\u64cd\u4f5c\u7b26\u63d2\u5165\u67e5\u8be2\u7ed3\u679c(\u4f1a\u901a\u8fc7listOfObjects\u8fdb\u884c\u5b9e\u4f53\u8f6c\u6362)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u6ce8\u610f:\u4e00\u5b9a\u8981\u53ca\u65f6\u53d6\u6d88\u8ba2\u9605,\u4ee5\u514d\u5f15\u8d77\u5185\u5b58\u6cc4\u9732"}),"\n",(0,l.jsx)(n.h3,{id:"\u591a\u5f20\u8868\u7684\u76d1\u542c",children:"\u591a\u5f20\u8868\u7684\u76d1\u542c"}),"\n",(0,l.jsx)(n.p,{children:"\u6bd4\u5982\u6709\u8fd9\u6837\u7684\u4e1a\u52a1\u9700\u6c42,\u6211\u9700\u8981\u67e5\u8be2\u591a\u5f20\u8868\u4ee5\u5b8c\u6210\u8fd9\u6b21\u67e5\u8be2,\u4f46\u662f\u4e00\u6761SQL\u8bed\u53e5\u53c8\u4e0d\u80fd\u5b9e\u73b0."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'fetchDatasThenRefreshUI();//\u8bfb\u53d6\u6570\u636e\u5e76\u5237\u65b0UI,\u8fd9\u91cc\u4f1a\u8bfb\u53d6table1\u548ctable2\nmStorIOSQLite\n    .observeChangesInTables(Sets.newHashSet("table1","table2"))\n    .subscribe(changes -> {\n         fetchDatasThenRefreshUI(); //\u5982\u679c\u6709\u53d8\u5316\u518d\u6b21\u8bfb\u53d6\u6570\u636e\u5e93\n    });\n'})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u5199\u6cd5\u662f\u4e0d\u662f\u5f88\u7e41\u7410,\u6211\u4eec\u91cd\u6784\u4e00\u4e0b..."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'mStorIOSQLite\n    .observeChangesInTables(Sets.newHashSet("table1","table2"))\n    .startWith(Changes.newInstance(""))\n    .compose(this.<Changes>bindUntilEvent(FragmentEvent.DESTROY)) //\u4f7f\u7528RxLifecycle\u81ea\u52a8\u53d6\u6d88\u8ba2\u9605\n    .subscribe(changes -> {\n         fetchDatasThenRefreshUI(); //\u8bfb\u53d6\u6570\u636e\u5e76\u5237\u65b0UI,\u8fd9\u91cc\u4f1a\u8bfb\u53d6table1\u548ctable2\n    });\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u4e3b\u52a8\u901a\u77e5\u53d8\u5316",children:"\u4e3b\u52a8\u901a\u77e5\u53d8\u5316"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"StorIOSQLite"}),"\u9ed8\u8ba4\u7684\u901a\u77e5\u53d8\u5316\u662f\u53ea\u8981\u5bf9\u4e00\u5f20\u8868\u6709\u6570\u636e\u64cd\u4f5c\u65f6(CURD)\u5747\u4f1a\u53d1\u751f\u901a\u77e5,\u5982\u679c\u6211\u4eec\u6709\u4e2a\u4e1a\u52a1\u9700\u6c42\u662f\u9700\u8981\u7ed9\u4e00\u4e2a\u8868\u91cc\u9762\u63d2\u51651000\u6761\u6570\u636e,\u63d2\u5165\u6210\u529f\u540e\u518d\u5237\u65b0\u754c\u9762\u3002\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u9700\u8981",(0,l.jsx)(n.code,{children:"LowLevel"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'List<String> strings = ...; //\u5b58\u653e\u4e86\u64cd\u4f5c\u4e24\u4e2a\u6570\u636e\u5e93\u8868\u7684sql\u8bed\u53e5\ntry {    \n    mStorIOSQLite.lowLevel().beginTransaction(); //\u4e8b\u52a1\n    for (String sql : strings) { \n        mStorIOSQLite.lowLevel()\n            .executeSQL(RawQuery.builder().query(sql).build()); \n    }\n    mStorIOSQLite.lowLevel()\n        .setTransactionSuccessful();\n    //\u901a\u77e5table1\u548ctable2\u53d1\u751f\u4e86\u53d8\u5316(\u89e6\u53d1\u518d\u6b21\u8bfb\u53d6\u4e8b\u4ef6)\n    mStorIOSQLite.lowLevel()\n        .notifyAboutChanges(Changes.newInstance(Sets.newHashSet("table1","table2"))); \n    } finally {\n        mStorIOSQLite.lowLevel().endTransaction();\n    }\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},2949:e=>{e.exports=JSON.parse('{"permalink":"/2017/think-about-storio","source":"@site/blog/2017/think-about-storio.md","title":"\u4ecb\u7ecd\u4e0bStorIOSQLite\u5230RxJava","description":"storio\u7b80\u4ecb","date":"2017-03-31T09:46:40.000Z","tags":[{"inline":true,"label":"Android","permalink":"/tags/android"},{"inline":true,"label":"RxJava","permalink":"/tags/rx-java"}],"readingTime":6.975,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u4ecb\u7ecd\u4e0bStorIOSQLite\u5230RxJava","date":"2017-03-31T09:46:40.000Z","tags":["Android","RxJava"]},"unlisted":false,"prevItem":{"title":"\u8fc1\u79fb\u6587\u6863\u5230 Docusaurus","permalink":"/2025/02/22/hello-docusaurus"},"nextItem":{"title":"2017\u5f00\u7bc7:curl\u4f7f\u7528\u5907\u5fd8","permalink":"/2017/login-with-curl"}}')},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const l={},s=r.createContext(l);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);